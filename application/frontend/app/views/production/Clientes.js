Ext.define("MyDesktop.app.views.Clientes",{extend:"Ext.panel.Panel",alias:"widget.wclientes",requires:["MyDesktop.app.stores.Clientes","MyDesktop.app.views.ClienteEditar","MyDesktop.app.stores.Generos"],initComponent:function(){var a=Ext.create("MyDesktop.app.stores.Clientes");var b=Ext.create("MyDesktop.app.stores.Busquedas");Ext.apply(this,{layout:"fit",items:[{border:false,xtype:"gridpanel",store:a,id:"dgvcliente",sortableColumns:false,columns:[{text:"Id",flex:0.3,sortable:true,dataIndex:"_idper"},{text:"Apellido Paterno",flex:1,sortable:true,dataIndex:"_paterno"},{text:"Apellido Materno",flex:1,sortable:true,dataIndex:"_materno"},{text:"Nombres",sortable:true,flex:1,dataIndex:"_nombre"},{text:"Doc.Identidad",style:"text-aling:center",flex:1,sortable:true,dataIndex:"_numerodoc"},{text:"R.U.C",style:"text-aling:center",flex:1,sortable:true,dataIndex:"_numeroruc"}]}],tbar:[{xtype:"combobox",id:"cboBuscarPor",emptyText:"Tipo de Busqueda",store:b,queryMode:"local",displayField:"descripcion",valueField:"id"},{xtype:"textfield",id:"txtbuscar",labelWidth:50,fieldStyle:"text-transform:uppercase"},{text:"<b>Buscar</b>",id:"btnBuscarClie",iconCls:"user",handler:function(){var c=Ext.getCmp("txtbuscar").getValue();var d=Ext.getCmp("cboBuscarPor").getValue();if(d==null){Ext.Msg.alert("Error","Seleccione el tipo de busqueda!");return false}a.getProxy().extraParams={pid:(d==0?c:0),ppaterno:(d==1?c:null),pmaterno:(d==2?c:null),pnombres:(d==3?c:null)};a.loadPage(1)}},"-",{text:"Listar",tooltip:"Agregar Registro",iconCls:"icon-grid",handler:function(){var c=null;var d=0;a.getProxy().extraParams={pid:(d==0?c:0),ppaterno:(d==1?c:null),pmaterno:(d==2?c:null),pnombres:(d==3?c:null)};a.loadPage(1)}},"-",{text:"Nuevo",tooltip:"Agregar Registro",iconCls:"add",handler:function(){var c=Ext.create("MyDesktop.app.views.ClienteEditar")}},"-",{text:"Modificar",tooltip:"Mdificar opciones",iconCls:"boton-edit",listeners:{click:function(){fs_RegistroModificarPersona()}}}],dockedItems:[{xtype:"pagingtoolbar",id:"ptbclientes",store:a,dock:"bottom",displayInfo:true}]});this.callParent(arguments)}});function fs_RegistroModificarPersona(){var b=Ext.getCmp("dgvcliente");record=b.getSelectionModel().getSelection();if(record[0]){var a=Ext.create("MyDesktop.app.views.ClienteEditar");a.down("form").loadRecord(record[0])}else{Ext.Msg.alert("Aviso","Tiene que seleccionar un cliente!")}};